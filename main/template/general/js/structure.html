<script>
    const NavOpenIcon = document.querySelector("nav .desktop .right .mobile-menu svg#open");
    const NavCloseIcon = document.querySelector("nav .desktop .right .mobile-menu svg#close");
    const nav_light_icon = document.querySelector("nav .desktop .right .theme #light");
    const nav_dark_icon = document.querySelector("nav .desktop .right .theme #dark");

    (() => {
        let current_theme = window.localStorage.getItem(SETTING.LocalStorage.Display.theme);

        if (current_theme == "dark") {
            nav_light_icon.classList.remove("active");
            nav_dark_icon.classList.add("active");
        }
    })();

    nav_light_icon.addEventListener("click", (e) => {
        e.preventDefault();

        nav_light_icon.classList.remove("active");
        nav_dark_icon.classList.add("active");

        Display.setTheme(ThemeList.dark);
    });

    nav_dark_icon.addEventListener("click", (e) => {
        e.preventDefault();

        nav_light_icon.classList.add("active");
        nav_dark_icon.classList.remove("active");

        Display.setTheme(ThemeList.light);
    });

    function OpenNav() {
        NavOpenIcon.classList = "";
        NavCloseIcon.classList = "active";

        document.querySelector("nav .mobile").style.display = "inline-flex";
        setTimeout(() => {
            document.querySelector("nav .mobile").classList.add("active");
        }, 10);
    }

    function CloseNav() {
        NavOpenIcon.classList = "active";
        NavCloseIcon.classList = "";

        document.querySelector("nav .mobile").classList.remove("active");

        setTimeout(() => {
            document.querySelector("nav .mobile").style.display = "none";
        }, 210);
    }

    NavOpenIcon.addEventListener("click", OpenNav);

    NavCloseIcon.addEventListener("click", CloseNav);

    document.querySelectorAll("nav li:not(.disable)").forEach(ele => {
        ele.classList = "";
        ele.addEventListener("click", e => {
            CloseNav();
        })
    });

    switch (Route.get_path()) {
        case "/exercises":
        case "/exercise-tutorial":
        case "/exercise-trainning":
        case "/exercise-scored":
            document.querySelectorAll("nav li#exercises-menu").forEach(ele => {
                ele.classList.add("active");
            });
            break;

        case "/setting":
            document.querySelectorAll("nav li#setting").forEach(ele => {
                ele.classList.add("active");
            });
            break;

        default:
            break;
    }
</script>